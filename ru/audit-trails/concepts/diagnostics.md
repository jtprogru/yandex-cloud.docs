# Лог диагностики

Лог диагностики трейла содержит записи об изменении состоянии самого [трейла](./trail.md).
Лог диагностики не имеет отношения к событиям ресурсов, [аудитные логи](./format.md) которых трейл собирает.

Состояние трейла описывается одним из статусов:

* `Active` — трейл работает и собирает аудитные логи с доступных ресурсов;
* `Error` — возможно нарушение в работе объектов назначения трейла или самого трейла. [Ознакомьтесь](../operations/error.md) с рекомендациями по восстановлению нормальной работы трейла.

Работающий трейл может перейти в статус `Error` в результате некорректных действий администратора, например:

* была изменена конфигурация [объекта назначения](./trail.md#target), куда загружаются аудитные логи {{ at-short-name }} (удален бакет в {{ objstorage-short-name }}, лог группа {{ cloud-logging-short-name }});
* были модифицированы разрешения сервисной учетной записи, от имени которой работает настроенный трейл (отозваны разрешения [`audit-trails.viewer`](../security/index.md#roles-list), [`storage.uploader`](../../storage/security/index.md#storage-uploader) и другие).

Если работоспособность трейла восстановлена в течение трех суток с момента возникновения статуса `Error`, то все сгенерированные за период неработоспособности записи аудита для такого трейла будут загружены в соответствующий объект назначения.

Если работоспособность трейла была восстановлена после истечения трех суток с момента возникновения статуса `Error`, то в объект назначения будут загружены события аудита, сгенерированные для такого трейла за предыдущие 72 часа с момента восстановления его работоспособности.
