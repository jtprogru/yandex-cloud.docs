# Трансформация данных

Трансформация — это преобразование данных с помощью особой функции-трансформера. Такие функции выполняются на потоке данных, применяются к каждому элементу изменений данных (data change item) и преобразуют их. Трансформер может работать и на уровне мета-информации, и на уровне самих данных.

Трансформацию данных можно настроить во время [создания](../operations/transfer.md#create) или [изменения](../operations/transfer.md#update) трансфера.

Трансформация данных доступна, только если источник и приемник имеют разные [типы](../concepts/index.md#connectivity-matrix).

Трансформеры задаются списком. При активации трансфера для подходящих под заданные условия таблиц составляется план трансформации. Трансформеры будут применяться к таблицам в том порядке, в котором они перечислены в списке.

## Типы трансформеров {#transformers-types}

Некоторые трансформеры могут иметь ограничения и применимы не для всех типов пар источник-приемник. Список трансформеров будет пополняться. В настоящий момент доступны следующие типы:

{% include [list-of-transformers](../../_includes/data-transfer/list-of-transformers.md) %}

### Переименование таблиц {#rename-tables}

Вы можете задать правила переименования таблиц, указав существующие имена таблиц в источнике и новые имена для этих таблиц в приемнике.

### Фильтр колонок {#columns-filter}

Вы можете настроить список столбцов таблиц для переноса:

1. С помощью списков включенных и исключенных таблиц задайте перечень таблиц, к которым будет применен фильтр.
1. С помощью списков включенных и исключенных колонок задайте перечень столбцов, которые должны перенестись в таблицы приемника.

### Маскирование данных {#data-mask}

Вы можете захэшировать данные:

1. С помощью списков включенных и исключенных таблиц задайте перечень таблиц, в которых будут маскироваться данные.
1. Укажите имя колонки для маскирования (регулярное выражение). Для каждой колонки укажите соль (строка типа пароль). Эта строка будет использована в функции `HMAC(sha256, salt)`, применяемой к данным в колонке.

### Разделение на подтаблицы {#subtable-splitting}

Для разбиения таблиц:

1. С помощью списков включенных и исключенных таблиц задайте перечень таблиц.
1. Укажите колонки в таблицах для разбиения.
1. Укажите строку разбиения, которая будет соединять составляющие в новом имени таблицы.

### Замена первичных ключей {#replace-primary-key}

Для переопределения первичных ключей задайте список включенных и исключенных таблиц и список колонок, используемых в качестве первичного ключа.

### Преобразование значений колонок в строки {#convert-to-string}

Для преобразования значений колонок в строковые значения задайте список включенных и исключенных таблиц и список колонок. Значения будут преобразованы в зависимости от исходного типа:

| Исходный тип | Формат                                            |
|--------------|---------------------------------------------------|
| Any          | Сериализованный формат JSON                       |
| Date         | Строка вида `2006-01-02`                          |
| DateTime     | Строка вида `2006-01-02T15:04:05.999999999Z07:00` |

### Шардирование {#shard}

Задайте количество шардов для конкретных таблиц и список колонок, по значениям которых будет вычисляться хеш для определения шарда.

